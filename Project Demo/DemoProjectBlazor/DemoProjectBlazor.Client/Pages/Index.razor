@page "/index"
@rendermode @(new InteractiveWebAssemblyRenderMode(prerender: false))
@inject HttpClient Http

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" integrity="sha512-..." crossorigin="anonymous" />

<PageTitle>Index</PageTitle>

@if (isDeleting)
{
	<div class="modal fade show" style="display:block;" tabindex="-1" role="dialog">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title">Confirmation</h5>
					<button @onclick="CancelDelete" type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<p>Bạn có chắc muốn xóa sinh viên này?</p>
				</div>
				<div class="modal-footer">
					<button @onclick="() => Delete()" type="button" class="btn btn-danger">Có</button>
					<button @onclick="CancelDelete" type="button" class="btn btn-secondary" data-dismiss="modal">Không</button>
				</div>
			</div>
		</div>
	</div>
}

<h2>
	<span style="margin-right: 5px;"><button class="button-search-hide" @onclick="ToggleSearchForm"><i class="fas fa-list"></i></button></span>Danh sách cựu sinh viên
</h2>

@if (isSearchFormOpen)
{
	<form method="get" action="Filter">
		<div class="filter-section">
			<div class="filter-column">
				<label class="dropdown-label">Giới Tính:</label>
				<select id="GioiTinh" name="sex" class="form-control">
					<option value="">-- Chọn Giới Tính --</option>
					<option value="M">Nam</option>
					<option value="F">Nữ</option>
				</select>
			</div>

			<div class="filter-column">
				<label class="dropdown-label">Tìm kiếm:</label>
				<input type="text" name="searchQuery" class="form-control" placeholder="Nhập từ khóa tìm kiếm">
			</div>

			<div class="button-search-container">
				<button type="submit" class="button-search"><i class="fas fa-search"></i><span style="margin-left: 5px;">Tìm kiếm</span></button>
				<a href="" class="button-search"><i class="fas fa-plus"></i><span style="margin-left: 5px;"> Thêm sinh viên</span></a>
				<button class="button-search" id="button-delete-selected"><i class="fas fa-trash"></i><span style="margin-left: 5px;">Xóa đã chọn</span></button>
			</div>
		</div>
	</form>
}
<table class="table">
	<tr>
		<th><input type="checkbox" id="selectAll"></th>
		<th>Mã số sinh viên</th>
		<th>Họ tên cựu sinh viên</th>
		<th>Mã định danh</th>
		<th>Giới tính</th>
		<th>Số điện thoại</th>
		<th>Địa chỉ liên hệ</th>
		<th>Ngày sinh</th>
		<th>Chức năng</th>
	</tr>
	@foreach (var item in dsCuuSinhVien)
	{
		<tr>
			<td><input type="checkbox" name="selectedItems" value="@item.Id"></td>
			<td>@item.MaSoSv</td>
			<td>@item.HoCuuSv</td>
			<td>@item.MaDinhDanh</td>
			<td>@item.GioiTinh</td>
			<td>@item.SoDienThoai</td>
			<td>@item.DiaChiLienHe</td>
			<td>@item.NgaySinh</td>
			<td>
				<a href="" class="button"><i class="fas fa-pencil-alt"></i></a> |
				<a href="" class="button"><i class="fas fa-user"></i></a> |
				<button @onclick="() => ConfirmDelete(item.Id)" class="button delete-button">
					<i class="fas fa-trash"></i>
				</button>
			</td>
		</tr>
	}
</table>
<!-- Nút chuyển trang -->
@if (TotalPages > 1)
{
	<div>
		@for (int i = 1; i <= TotalPages; i++)
		{
			<button @onclick="() => LoadPage(i)" class="@(i == CurrentPage ? "active" : "")">@i</button>
		}
	</div>
}


